#!/usr/bin/env bash

# Get the current layout
CURRENT=$(setxkbmap -query | grep layout | awk '{print $2}')

# Logic to cycle through: us -> de -> ara
case "$CURRENT" in
    us)
        setxkbmap de
        NEW="DE"
        ICON="ðŸ‡©ðŸ‡ª"
        ;;
    de)
        setxkbmap ara
        NEW="AR"
        ICON="ðŸ‡¸ðŸ‡¦"
        ;;
    *)
        setxkbmap us
        NEW="US"
        ICON="ðŸ‡ºðŸ‡¸"
        ;;
esac

# Send notification
notify-send -a "System" -r 100 -i "input-keyboard" "Keyboard Layout" "Switched to: $NEW $ICON"